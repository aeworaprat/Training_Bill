<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
</head>
<body>
<style>
    table {
        border-collapse: collapse;
        width: 100%;
    }

    td, th {
        border: 1px solid #262626;
        text-align: left;
        padding: 8px;
    }
</style>
    <div class="container">
        <a href="../index.html">กลับ</a>
        <h2>จัดการบิล</h2>
        <br><br>
        <div id="create_table">

        </div>
    </div>
    <script>
    
    (function() 
    {
        GetAllReceipt();
        
    })();

    async function GetAllReceipt()
    {
        const result = await axios.get('http://localhost:5252/Receipt/GetAll',);
        const data = result.data;
        CreateTable(data);
    }

    function CreateTable(data)
    {
        let html_code = "";
        html_code += "<table>";
        html_code += "<tr>";
        html_code += "<th width='5%'>No.</th>";
        html_code += "<th width='15%'>รหัสบิล</th>";        
        html_code += "<th width='15%'>วันที่</th>";
        html_code += "<th width=>ราคารามสุทธิ</th>";
        html_code += "<th width='20%' style='text-align:center'>ดำเนินการ</th>";
        html_code += "</tr>";
        data.forEach((row, index) => {
            html_code += "<tr>";
            html_code += "<td>"+(index+1)+"</td>";
            html_code += "<td>"+row['receipt_code']+"</td>";
            html_code += "<td>"+row['receipt_date']+"</td>";
            html_code += "<td style='text-align: right'>"+row['receipt_total_price']+"</td>";
            html_code += "<td style='text-align:center'>";
            html_code += "<button onclick='ViewReceipt("+row['receipt_id']+")'>ดู</button> ";
            html_code += "</td>";
            html_code += "</tr>";
        })
        html_code += "<table>";
        document.getElementById("create_table").innerHTML = html_code;
    }

    function ViewReceipt(id){

        window.location.href = "v_receipt_info.html?id="+id;


    }

    </script>
    </body>
</html>